<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Εθελοντικός Οργανισμός Νεολαίας</title>
  <link rel="stylesheet" href="/main.css" />
  <script src="https://unpkg.com/lucide@latest"></script>
  <link href="https://fonts.googleapis.com/css2?family=Roboto Condensed:wght@700&display=swap" rel="stylesheet">
</head>
<body>
  <header>
    <div style="display: flex; align-items: center; justify-content: space-between;">
      <img src="/images/icon.png" alt="Volunteer Logo" style="height: 80px; margin-left: 1rem;" />
  
      <h1 style="flex-grow: 1; text-align: center; margin: 0;">
        ΕΘΕΛΟΝΤΙΚΟΣ ΟΡΓΑΝΙΣΜΟΣ ΝΕΟΛΑΙΑΣ
      </h1>
  
      <div style="width: 80px; margin-right: 1rem;"></div>
    </div>
    <nav id="main-nav">
      <a href="/main.html">ΑΡΧΙΚΗ</a>
      <a href="/activities.html">ΔΡΑΣΤΗΡΙΟΤΗΤΕΣ</a>
      <a href="/contact.html">ΕΠΙΚΟΙΝΩΝΙΑ</a>
      <a href="/leaderboard.html"><i data-lucide="trophy"></i></a>
      <a href="/register.html" id="register-link"><i data-lucide="user-plus"></i></a>
      <a href="/login.html" id="login-link"><i data-lucide="log-in"></i></a>
    </nav>
  </header>

  <main>
    <div class="main-container">
      <section>
        <h2>Ποιοι είμαστε</h2>
        <p>
          Είμαστε μια ενεργή κοινότητα νέων που μοιράζεται το πάθος για κοινωνική προσφορά και θετική αλλαγή.
        </p>
        <p>
          Μέσα από δράσεις σε όλη την Ελλάδα, ενώνουμε τις δυνάμεις μας για έναν πιο δίκαιο και βιώσιμο κόσμο.
          Δίνουμε βήμα σε άτομα κάθε ηλικίας να συμμετέχουν και να κάνουν τη διαφορά.
        </p>
      </section>
      
      <section>
        <h2>Το έργο μας</h2>
        <p>
          Από το 2020, έχουμε:
        </p>
        <ul>
          <li>Οργανώσει πάνω από 50 καθαρισμούς παραλιών και πόλεων</li>
          <li>Φυτέψει περισσότερα από 1.000 δέντρα</li>
          <li>Υποστηρίξει κοινωνικά ευάλωτες ομάδες με δράσεις αλληλεγγύης</li>
        </ul>
        <p>
          Συνεργαζόμαστε με σχολεία, δήμους και άλλες οργανώσεις για ένα καλύτερο αύριο.
        </p>
      </section>
      
      <section>
        <h2>Ενδιαφέρεσαι να συμμετάσχεις;</h2>
        <p>
          Ψάχνεις τρόπο να προσφέρεις; Να μάθεις νέα πράγματα; Να γνωρίσεις ανθρώπους με κοινό όραμα;
        </p>
        <p>
          Οι δράσεις μας είναι ανοιχτές για όλους! Μπορείς να συμμετάσχεις μία φορά ή να γίνεις τακτικό μέλος της ομάδας.
        </p>
        <button onclick="window.location.href='/activities.html'">Δες τις Δραστηριότητες</button>
      </section>

      <section>
        <h2>Γίνε Εθελοντής</h2>
        <form id="volunteer-form">
          <label for="username">Όνομα</label>
          <input type="text" id="username" name="username" required />
          <label for="email">Email</label>
          <input type="email" id="email" name="email" required />
          <label for="phone">Τηλέφωνο</label>
          <input type="tel" id="phone" name="phone" />
          <label for="password">Κωδικός</label>
          <input type="password" id="password" name="password" required />
          <button type="submit">Συμμετοχή</button>
        </form>
      </section>
    </div>
  </main>

  <footer>
    <div class="footer-content">
      <div class="footer-left">
        <p>
          <strong>Διεύθυνση:</strong> Λεωφόρος Εθελοντών 123, Αθήνα 10435<br />
          <strong>Τηλέφωνο:</strong> <a href="tel:+302112345678">(+30) 211 234 5678</a><br />
          <strong>Email:</strong> <a href="mailto:info@volunteer.gr">info@volunteer.gr</a>
        </p>
      </div>
      <div class="footer-right">
        <a href="/" target="_blank"><i data-lucide="instagram"></i></a>
        <a href="/" target="_blank"><i data-lucide="facebook"></i></a>
        <a href="/" target="_blank"><i data-lucide="twitter"></i></a>
      </div>
    </div>
    <div class="footer-bottom">
      © 2025 Εθελοντικός Οργανισμός Νεολαίας
    </div>
  </footer>

  <script>
    let userData = null;

    async function loadSessionAndEvents() {
      try {
        const profileRes = await fetch('/profile');
        if (profileRes.ok) {
          const profileData = await profileRes.json();
          userData = profileData.user;

          const nav = document.getElementById('main-nav');

          const registerLink = document.getElementById('register-link');
          if (registerLink) registerLink.remove();

          const loginLink = document.getElementById('login-link');
          if (loginLink) loginLink.remove();

          if (userData.role === 'admin') {
            const admin = document.createElement('a');
            admin.href = '/admin.html';
            admin.id = 'admin-link';
            admin.innerHTML = `<i data-lucide="settings"></i>`;
            nav.appendChild(admin);
          }

          const profile = document.createElement('a');
          profile.href = '/profile.html';
          profile.innerHTML = `<i data-lucide="user"></i>`;
          nav.appendChild(profile);

          const logout = document.createElement('a');
          logout.href = '/logout';
          logout.id = 'logout-link';
          logout.innerHTML = `<i data-lucide="log-out"></i>`;
          nav.appendChild(logout);
        }
      } catch (e) {
        console.error('Session check failed', e);
      }

      loadEvents();
    }

    function loadEvents() {
      fetch('/events')
        .then(res => res.json())
        .then(data => {
          const eventList = document.getElementById('event-list');
          const completedList = document.getElementById('completed-event-list');

          data.upcoming.forEach(event => {
            const li = document.createElement('li');
            li.textContent = `${event.name} - ${event.date} - ${event.location}`;
            eventList.appendChild(li);
          });

          data.completed.forEach(event => {
            const li = document.createElement('li');
            li.textContent = `${event.name} - ${event.date} - ${event.location}`;
            completedList.appendChild(li);
          });

          lucide.createIcons();
        });
    }

    document.getElementById('volunteer-form').addEventListener('submit', async e => {
      e.preventDefault();
      const formData = Object.fromEntries(new FormData(e.target).entries());
      const response = await fetch('/register', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(formData)
      });
      if (response.ok) window.location.href = '/login.html';
    });

    loadSessionAndEvents().then(() => {
    lucide.createIcons();
    });
  </script>
</body>
</html>
